---
title: 深色模式
description: 如何在设计系统中使用深色模式
icon: 'moon'
---

next-forge 通过结合 [Tailwind CSS](https://tailwindcss.com/docs/dark-mode) 和 [next-themes](https://github.com/pacocoursey/next-themes) 提供内置的深色模式支持。

## 实现 {#implementation}

深色模式的实现使用了 Tailwind 的 `darkMode: 'class'` 策略，通过在 `html` 元素上添加 `dark` 类来切换深色模式。这种方法提供了更好的深色模式控制，并防止主题闪烁。

应用程序中已经配置了 `next-themes` provider，它自动处理主题持久化和系统偏好检测。第三方组件（如 Clerk's Provider 和 Sonner）也已经预先配置以遵循这个设置。

## 使用方法 {#usage}

默认情况下，每个应用程序主题都会默认使用用户的操作系统偏好设置。

要允许用户手动更改主题，你可以使用位于设计系统包中的 `ModeToggle` 组件。我们已经将其添加到 `app` 侧边栏和 `web` 导航栏中，但你可以在任何地方导入它：

```tsx page.tsx
import { ModeToggle } from '@repo/design-system/components/mode-toggle';

const MyPage = () => (
  <ModeToggle />
);
```

你可以直接使用 `next-themes` 中的 `useTheme` hook 来检查主题。例如：

```tsx page.tsx
import { useTheme } from 'next-themes';

const MyPage = () => {
  const { resolvedTheme } = useTheme();

  return resolvedTheme === 'dark' ? '深色模式启动' : '浅色模式启动';
}
```
